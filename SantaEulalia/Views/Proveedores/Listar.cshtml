// Vista: Listar.cshtml
@model List<CapaEntidad.entProveedores>

@{
    ViewBag.Title = "Lista de Proveedores";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Lista de Proveedores</h2>
<a class="btn btn-success mb-3" href="@Url.Action("Registrar", "Proveedores")">+ Nuevo Proveedor</a>

@if (Model != null && Model.Count > 0)
{
    <table class="table table-bordered table-dark table-striped">
        <thead>
            <tr>
                <th>ID</th>
                <th>Razón Social</th>
                <th>RUC</th>
                <th>Dirección</th>
                <th>Contacto</th>
                <th>Usuario</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model)
            {
                <tr>
                    <td>@item.id_proveedor</td>
                    <td>@item.razon_social</td>
                    <td>@item.ruc</td>
                    <td>@item.direccion</td>
                    <td>@item.contacto</td>
                    <td>@(item.id_usuario != null ? item.id_usuario.ToString() : "Sin usuario")</td>
                    <td>
                        <a class="btn btn-warning btn-sm" href="@Url.Action("Editar", "Proveedores", new { id = item.id_proveedor })">Editar</a>
                        <a class="btn btn-danger btn-sm" href="@Url.Action("Eliminar", "Proveedores", new { id = item.id_proveedor })" onclick="return confirm('¿Desea eliminar este proveedor?');">Eliminar</a>
                        <a class="btn btn-info btn-sm" href="@Url.Action("Detalles", "Proveedores", new { id = item.id_proveedor })">Detalles</a>
                        <a href="@Url.Action("ConsultarEstado", "Proveedores", new { id = item.id_proveedor })" class="btn btn-info btn-sm">Ver Estado</a>
                    </td>

                </tr>
            }
        </tbody>
    </table>
}
else
{
    <p class="text-light">No hay proveedores registrados.</p>
}