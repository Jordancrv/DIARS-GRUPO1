@model CapaEntidad.entPedidoVenta

@{
    ViewBag.Title = "Detalle de Venta";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2 class="mb-4">Detalle de Venta</h2>

<!-- Información general de la venta -->
<table class="table table-dark table-bordered">
    <tr>
        <th>ID Pedido</th>
        <td>@Model.IdPedidoVenta</td>
    </tr>
    <tr>
        <th>Cliente</th>
        <td>@Model.Cliente?.nombres</td>
    </tr>
    <tr>
        <th>Usuario</th>
        <td>@Model.Usuario?.id_usuario</td>
    </tr>
    <tr>
        <th>Fecha</th>
        <td>@Model.Fecha.ToShortDateString()</td>
    </tr>
    <tr>
        <th>Comprobante</th>
        <td>@Model.Comprobante?.id_comprobante</td>
    </tr>
    <tr>
        <th>Estado</th>
        <td>@Model.Estado</td>
    </tr>
    <tr>
        <th>Total Bruto</th>
        <td>@Model.Total.ToString("C")</td>
    </tr>
    <tr>
        <th>Descuento por Productos</th>
        <td>@Model.TotalDescuentoProductos.ToString("C")</td>
    </tr>
    <tr>
        <th>Descuento por Promociones</th>
        <td>@Model.TotalDescuentoPromociones.ToString("C")</td>
    </tr>
    <tr>
        <th>Total con Descuento</th>
        <td>@Model.TotalConDescuento.ToString("C")</td>
    </tr>
</table>

<!-- Detalles de la venta -->
<h4 class="mt-4">Productos Vendidos</h4>
<table class="table table-striped table-bordered table-dark">
    <thead>
        <tr>
            <th>ID Detalle</th>
            <th>Producto</th>
            <th>Cantidad</th>
            <th>Precio Unitario</th>
            <th>Subtotal</th>
            <th>Descuento</th>
            <th>Total con Descuento</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model.Detalles)
        {
            <tr>
                <td>@item.IdDetalle</td>
                <td>@item.Producto?.nombre</td>
                <td>@item.Cantidad</td>
                <td>@item.PrecioUnitario.ToString("C")</td>
                <td>@item.Subtotal.ToString("C")</td>
                <td>@item.Descuento.ToString("C")</td>
                <td>@item.TotalConDescuento.ToString("C")</td>
            </tr>
        }
    </tbody>
</table>

<a asp-action="Listar" class="btn btn-secondary">Volver al listado</a>
